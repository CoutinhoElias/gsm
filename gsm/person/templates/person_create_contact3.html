{% extends "index.html" %}
{% load static %}
{% load material_form %}
{% load i18n %}
{% block container %}

<script type="text/javascript">
    $(function() {
        $('#myForm tbody tr').formset({
            prefix: '{{ file_document_formset.prefix }}'
        });
    })
</script>

<div class="card" id="card-radius">
    <form class="form-container" id="myForm" method="POST" enctype="multipart/form-data">{% csrf_token %}
            <div class="card-content">
                {% form form=form %}
                    {% part form.name prefix %}<i class="material-icons prefix">person</i>{% endpart %}
                    {% part form.phone prefix %}<i class="material-icons prefix">phone</i>{% endpart %}
                    {% part form.email prefix %}<i class="material-icons prefix">contact_mail</i>{% endpart %}
                {% endform %}
            </div>

        <div class="card-content">
            <h5>Adicione os Tipos de contatos</h5>
            <table class="highlight">
                <thead class="#cfd8dc blue-grey lighten-4">
                    <tr>
                        <th class="left-align">Tipo Contato</th>
                        <th class="left-align">Descrição</th>
                        <th class="left-align">Pessoa Contato</th>
                        <th></th>
                        <th class="left-align">Deletar</th>

                    </tr>
                </thead>

                {{ contact_formset.management_form }}

                <tbody>
                    {% for item_form in contact_formset %}
                          <tr>
                            <td>{{ item_form.kind.errors }} {{ item_form.kind }}</td>
                            <td>{{ item_form.descriprion.errors }} {{ item_form.description }}</td>
                            <td>{{ item_form.contact.errors }} {{ item_form.contact }}</td>
                            <td>{{ item_form.id.errors }} {{ item_form.id }} {% if item_form.instance.pk %}{{ item_form.DELETE }}{% endif %}</td>
                            <td class="left-align">
                               <div class="switch">
                                   <label>
                                       {{ item_form.DELETE.errors }}
                                       {{item_form.DELETE}}
                                    <span class="lever"></span>
                                   </label>
                               </div>
                            </td>
                          </tr>
                    {% endfor %}
                </tbody>
            </table>

            <h5>Adicione os documentos</h5>

            <table class="highlight">
                <thead class="#cfd8dc blue-grey lighten-4">
                    <tr>
                        <th class="left-align">Documento</th>
                        <th class="left-align">Arquivo</th>
                        <th></th>
                        <th class="left-align">Deletar</th>
                    </tr>
                </thead>

                {{ file_document_formset.management_form }}

                <tbody>
                    <div id="form_set2">
                        {% for file_document_form in file_document_formset %}
                            <tr data-formset-form="">
                                <td>{{ file_document_form.kind.errors }} {{ file_document_form.kind }}</td>
                                <td>{{ file_document_form.file_document.errors }} {{ file_document_form.file_document }}</td>
                                <td>{{ file_document_form.id.errors }} {{ file_document_form.id }} {% if file_document_form.instance.pk %}{{ file_document_form.DELETE }}{% endif %}</td>
                                <td class="left-align">
                                   <div class="switch">
                                       <label>
                                           {{ file_document_form.DELETE.errors }}
                                           {{file_document_form.DELETE}}
                                        <span class="lever"></span>
                                       </label>
                                   </div>
                                </td>

                                <td>
                                    <div style="display:none"><input type="checkbox" name="formset-emergency_contacts-__prefix__-DELETE" id="id_person_documents-__prefix__-DELETE" /></div>
                                    <button type="button" class="btn btn-flat white lighten-4"
                                            style="padding:0px 5px;font-size:0.7rem;height:calc(100% - 15px);width:100%"
                                            data-formset-delete-button>
                                        <i class="material-icons">clear</i>
                                    </button>
                                </td>
                            </tr>
                        {% endfor %}

<!--                        <input type="button" value="Add More" id="add_more2">-->
<!--                        <div id="empty_form2" style="display:none">-->
<!--                            <table class='no_error'>-->
<!--                                {{ file_document_form.empty_form }}-->
<!--                            </table>-->
<!--                        </div>-->
                    </div>
                </tbody>
            </table>
        </div>

        <div class="card-action">
            <div class="right-align">
                <button name="btn_submit" class="waves-effect waves-light btn" type="submit">Salvar</button>
            </div>
        </div>

<!-- ------------------------------------------------MODELO FORMSET--------------------------------------------------------------- -->
<!--        <script>-->
<!--            $('#add_more').click(function() {-->
<!--                cloneMore('div.table:last', 'service');-->
<!--            });-->
<!--        </script>-->
<!--        <h3>FormSet example</h3>-->
<!--        <div id="form_set">-->
<!--            {% for form in file_document_formset %}-->
<!--                {{form.non_field_errors}}-->
<!--                {{form.errors}}-->
<!--                <table class='no_error'>-->
<!--                    {{ form }}-->
<!--                </table>-->
<!--            {% endfor %}-->
<!--        </div>-->
<!--        <input type="button" value="Add More" id="add_more">-->
<!--        <div id="empty_form" style="display:none">-->
<!--            <table class='no_error'>-->
<!--                {{ file_document_formset.empty_form }}-->
<!--            </table>-->
<!--        </div>-->
<!-- ------------------------------------------------FIM MODELO FORMSET------------------------------------------------------------ -->
    </form>
</div>

{% endblock %}



